# ToyVM

ToyVM is a custom assembly compiler and a simple virtual machine/interpreter to execute the code. It runs on Windows, Linux, and OSX. It supports linking c/c++ dynamic libraries through a simple plugin interface.

There are three main programs in the repository.

* tcom
* tvm
* tdbg

## tcom

Is the assembly compiler.

### tcom Usage

```txt
tcom <options> <input file>

   options:
      -h show this message.
      -o output file.
      -l link library.
      -d disable full path when reporting errors.
      -m print the module path and exit.
```

* -l Links a shared library into the file.
* -m Displays the location of the shared library folder.
* -d Is used in the tests to prevent full path names from being reported, which would cause them to fail.

## tvm

tvm runs the executable file generated by tcom.

### tvm Usage

```txt
tvm <options> <program_path>

   options:
      -h display this message.
      -t display execution time.
      -m print the module path and exit.
```

## tdbg

tdbg is an experimental debugger.

It is disabled by default. 
```-DBUILD_DBG=ON``` will enable it.

![Cap](capture.gif)

### tdbg Usage

```txt
tdbg <program_path>

q key       - exits the program.
down arrow  - steps one frame.
```

### Current Documentation

Documentation can be found [here.](Codes.md)

## Building

Building with CMAKE and make.

```txt
mkdir Build
cd Build
cmake ..
make
```

Testing and Installing.

```txt
mkdir Build
cd Build
cmake -DToyVM_INSTALL_PATH=<some install directory> -DBUILD_TEST=ON ..
make
make install
```
